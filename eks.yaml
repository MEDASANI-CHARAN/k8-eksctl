apiVersion: eksctl.io/v1alpha5
kind: ClusterConfig

metadata:
  name: expense-1
  region: us-east-1

# nodeGroups:
#   - name: expense
#     instanceType: m5.large
#     desiredCapacity: 3
#     spot: true

managedNodeGroups:
  - name: expense
    desiredCapacity: 3
    instanceTypes: 
      - "m5.large"  # Specify one or more spot-eligible instance types
    instancesDistribution:
      instanceTypes: ["m5.large"]
      #   - "m5.large"  # Use array format (with - for items)
      onDemandBaseCapacity: 0
      onDemandPercentageAboveBaseCapacity: 20  # 20% On-Demand fallback
      spotInstancePools: 0


# nodeGroups:
#   - name: expense-ng
#     desiredCapacity: 2
#     minSize: 1
#     maxSize: 3
#     instancesDistribution:
#       instanceTypes: ["m5.large"]
#       #   - "m5.large"  # Use array format (with - for items)
#       onDemandBaseCapacity: 0
#       onDemandPercentageAboveBaseCapacity: 20  # 20% On-Demand fallback
#       spotInstancePools: 2
#     volumeSize: 20
#     ssh:
#       allow: false