apiVersion: eksctl.io/v1alpha5
kind: ClusterConfig

metadata:
  name: expense-1
  region: us-east-1

nodeGroups:
  - name: expense-ng
    desiredCapacity: 2
    minSize: 1
    maxSize: 3
    instancesDistribution:
      instanceTypes: "t5.medium" # Cost-efficient burstable types
      onDemandBaseCapacity: 0
      onDemandPercentageAboveBaseCapacity: 20  # Small fallback to On-Demand
      spotInstancePools: 3
    volumeSize: 20  # EBS volume in GiB
    ssh:
      allow: true